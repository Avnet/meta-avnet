#include "include/dt-bindings/input/input.h"
#include "include/dt-bindings/interrupt-controller/irq.h"
#include "include/dt-bindings/gpio/gpio.h"
#include "include/dt-bindings/pinctrl/pinctrl-zynqmp.h"
#include "include/dt-bindings/phy/phy.h"

/ {
   chosen {
      bootargs = "earlycon console=ttyPS0,115200 clk_ignore_unused root=/dev/mmcblk0p2 rw rootwait cma=512M";
   };

   xlnk {
      compatible = "xlnx,xlnk-1.0";
   };

   chosen {
      xlnx,eeprom= &mac_eeprom;
   };

   vdd_icm_fixed: vdd_icm_fixed {
         compatible = "regulator-fixed";
         regulator-name = "vdd_icm_fixed";
         regulator-min-microvolt = <3300000>;
         regulator-max-microvolt = <3300000>;
         regulator-always-on;
         regulator-boot-on;
   };
   
   vddio_icm_fixed: vddio_icm_fixed {
         compatible = "regulator-fixed";
         regulator-name = "vddio_icm_fixed";
         regulator-min-microvolt = <3300000>;
         regulator-max-microvolt = <3300000>;
         regulator-always-on;
         regulator-boot-on;
   };

   vref_reg: vref_reg {
         compatible = "regulator-fixed";
         regulator-name = "vref_reg";
         regulator-min-microvolt = <3300000>;
         regulator-max-microvolt = <3300000>;
         regulator-always-on;
         regulator-boot-on;
   };
   
};

&gem2 {
   status = "okay";
   /* local-mac-address = [00 0a 35 00 02 90]; */
   phy-mode = "rgmii-id";
   phy-handle = <&phy0>;
   phy0: phy@7 {
      reg = <0x7>;
   };
};

/* QSPI partitions are defined with petalinux-config and described in system.conf.dtsi */
&qspi { /* MIO 0-5 - U10 */
   flash@0 { /* ISSI IS25WP256E */
      compatible = "mt25qu256a", "jedec,spi-nor"; /* 32MB */
      #address-cells = <1>;
      #size-cells = <1>;
      reg = <0>;
      spi-tx-bus-width = <1>;
      spi-rx-bus-width = <4>;
      spi-max-frequency = <50000000>; /* 50MHz */
   };

};

/* SD1 for SD card boot */
/* SD1 with level shifter */
/* only supports 3.3V, no level shifter */
&sdhci1 {
   status = "okay";
   no-1-8-v;
   disable-wp;
};


&axi_quad_spi_0 {
   #address-cells = <1>;
   #size-cells = <0>;

   invn_icm_spi: icm42688@0 {
      compatible = "invensense,icm42688";
      reg = <0>;
      spi-max-frequency = <24000000>;
      spi-cpol;
      spi-cpha;
      interrupt-parent = <&gic>;
      interrupts = <0 94 1>; // 89+5
   };

   click_adc: mcp320x@1 {
      compatible = "microchip,mcp3201";
      spi-max-frequency = <1000000>;
      reg = <1>;
      vref-supply = <&vref_reg>;
      #io-channel-cells = <1>;
   };
};

&axi_iic_2 {
   #address-cells = <1>;
   #size-cells = <0>;
   clock-frequency = <100000>;

   invn_icp_i2c: inv-icp10100-i2c@63 {
      compatible = "invensense,icp10100";
      reg = <63>;
   };
};

&i2c1 {
   #address-cells = <1>;
   #size-cells = <0>;
   /* Ethernet MAC ID EEPROM */
   mac_eeprom: mac_eeprom@58 { /* U7 */
      compatible = "atmel,24mac402";
      reg = <0x58>;
   };
};
